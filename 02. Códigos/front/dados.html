<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Consultar Cadastro</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f9; display:flex;align-items:center;justify-content:center;height:100vh;margin:0; }
    .card { background:#fff;padding:28px;border-radius:10px;box-shadow:0 6px 24px rgba(0,0,0,0.08); width:420px; }
    h2 { color:#7e3af2;text-align:center;margin:0 0 18px; }
    .form { display:flex; gap:10px; }
    input { flex:1;padding:10px;border-radius:8px;border:1px solid #ccc;font-size:15px; }
    button { padding:10px 16px;border-radius:8px;border:none;background:#7e3af2;color:#fff;font-weight:600;cursor:pointer; }
    .resultado { margin-top:16px;background:#f7f7fb;padding:12px;border-radius:8px;white-space:pre-line;font-size:14px; }
    .erro { color:#c0392b;font-weight:600; }
    .ok { color:#16a34a;font-weight:600; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Consultar Cadastro</h2>

    <div style="display:flex; gap:8px;">
      <input id="cpfInput" type="text" placeholder="Digite CPF (ou e-mail)">
      <button id="btnConsultar">Consultar</button>
    </div>

    <div id="resultado" class="resultado"></div>
  </div>

<script>
document.getElementById("btnConsultar").addEventListener("click", async () => {
  const cpf = document.getElementById("cpfInput").value.trim();
  const resultadoEl = document.getElementById("resultado");
  resultadoEl.textContent = "";

  if (!cpf) {
    resultadoEl.innerHTML = '<span class="erro">Digite um CPF ou e-mail para pesquisar.</span>';
    return;
  }

  try {
    const resp = await fetch(`consultarCadastro.php?cpf=${encodeURIComponent(cpf)}`);
    if (!resp.ok) throw new Error('Erro ao consultar');
    const data = await resp.json();

    if (!data || Object.keys(data).length === 0) {
      resultadoEl.innerHTML = '<span class="erro">Cadastro n√£o encontrado.</span>';
      return;
    }

    if (data.tipo === 'cpf') {
      resultadoEl.innerHTML = `<div class="ok">Cadastro encontrado:</div>
CPF: ${data.cpf}\nSenha: ${data.senha}`;
    } else if (data.tipo === 'identificador') {
      resultadoEl.innerHTML = `<div class="ok">Cadastro encontrado:</div>
Identificador: ${data.identificador}\nSenha: ${data.senha}`;
    } else {
      resultadoEl.innerText = JSON.stringify(data, null, 2);
    }

  } catch (err) {
    console.error(err);
    resultadoEl.innerHTML = '<span class="erro">Erro ao acessar os dados.</span>';
  }
});
</script>
</body>
</html>
